---
layout: post
title: "How to not start a blog."
categories: web
author:
- Marty Blaber
meta: "Springfield"
---

A multi-day journey into failing at starting a blog.

This is probably way too messy to be useful. I used it as a platform for figuring out how to use Github pages, Jekyll with the Minima theme, Mathjax, Collapsible code and some other bits and peices. I've also been using it as a way to keep track of all the resources I used and the markdown syntax. You can find the markdown [here](https://github.com/martyblaber/martyblaber.github.io/blob/main/_posts/2021-05-29-how-to-not-start-a-blog.md)

## Choosing Github

I understood how the internet worked ~2005. Javascript barely existed, CSS barely existed. Most pages were static, those that were dynamically created were generated with php. 

Fastforward 15 years and now I know almost nothing about how the internet really works. Now we have javascript, css generated by sass, ruby interpreting markdown to make static pages, hundreds of AWS lambdas executing in directed acyclic graphs to build a page on the fly while. For anyone who understands how the web really works, the above paragraph will read as woefully uninformed. Anyway, I chose github because it's free and has a nice guide on how to get started (that absolutely didn't work because I tried to be clever).

### What not to do

I started at [About Github pages and Jekyll][gj-about](reccommended reading for the beginner). And then tried to follow the guide [Creating a Github pages site with Jekyll][gj-create]. Which I did a bad job of (and ran into issues).

The general gist of what I did (I have a windows machine):

1. Start reading the [Creating][gj-create] guide above.
2. Realize I need to install Jekyll. [Install Jekyll for Windows][jekyll-install]
    1. Realize I need ruby. Download and install the `Ruby+Devkit` version from [RubyInstaller Downloads][ruby-downloads]
    2. Install [Jekyll][jekyll-install] amd [bundler][bundler] using gem (the package manager for ruby).
    
        In a *new* powershell or command prompt (needs to be new to make sure the system can find the newly installed *gem*)
        
        ```bash
        gem install jekyll bundler
        ```
3. Create a new repo *martyblaber.github.io*, so full path is https://github.com/martyblaber/martyblaber.github.io and create a blog folder. *Terrible Idea*
    - Spend hours trying to get this to work and finally give up and move everything to the root directory of the repo.
        - You can't use commands like `git mv blog/* ./ -k` in a command prompt or powershell because the `*` is not interpreted properly. Instead, use *git bash* to run `git mv blog/* ./ -k`. The `-k` is to ignore files that aren't being tracked. The leftover stuff in `blog/` can be removed with `rm -rf blog/*`. You should check if there's anything important in there before doing this!
4. Eventually, I had a working page. Time to install a theme. *Disaster*
    1. I couldn't get the `leap-day` theme to work based on the [theme guide on github][theme-github].
    2. One of the many issues I had with local debugging was jekyll / ruby 3 not having the right dependencies. So install webrick and add webrick to the gem file:

        In a powershell or command prompt.
        
        ```bash
        gem install webrick
        ```

        Add webrick to the end of the Gemfile.

        ```ruby    
        gem "webrick"
        ```

    3. Looking back on my gemfile. Maybe this whole problem was created by jekyll being commented out:
        
        <https://github.com/martyblaber/martyblaber.github.io/blob/broken-leap-day/Gemfile>
        

        ```ruby
        # Happy Jekylling!
        #gem "jekyll", "~> 4.2.2"*
        # This is the default theme for new Jekyll sites. You may change this to anything you like.
        #gem "minima", "~> 2.5"
        gem "github-pages", group: :jekyll_plugins
        # If you want to use GitHub Pages, remove the "gem "jekyll"" above and
        # uncomment the line below. To upgrade, run `bundle update github-pages`.
        gem "github-pages", "~> 226", group: :jekyll_plugins
        # If you have any plugins, put them here!
        group :jekyll_plugins do
            gem "jekyll-feed", "~> 0.12"
        end
        ```


### What do do instead

1. Give up on trying to follow the github guide and follow a different guide. <em>[Creating a Mathematics Blog with Jekyll][jekyll-math]</em>
    1. Move the whole site into a new branch called broken-leap-day and wipe the main branch clean.

        ```bash
        #In Git Bash:
        #Create a new branch and commit it.
        cd ./martyblaber.github.io/
        git branch -m broken-leap-day
        git commit -m "New branch in case this all fails"
        git push

        #Back to the main branch
        git checkout main
        git rm -rf *
        # If you see "fatal: pathspec '_site' did not match any files"
        # then run rm -r _site to delete and redo the git rm -rf * until there are no errors.

        cd ..
        #Working Dir is now ~/code/
        git clone https://github.com/jekyll/minima.git
        cp ./minima/* ./martyblaber.github.io/
        cd ./martyblaber.github.io/
        git add *
        git commit -m "Copy of the Minima theme"
        git push 
        ```

#### Quick aside on looking up command history in command prompt, powershell and bash or git bash.
- For Command Prompt, use `doskey /history`. Here is some of the trash that I recently typed into a command prompt.
    ```bat
    cd code
    ks
    ls
    dir
    cd martyblaber.github.io
    bundle
    N
    bundle install
    bundle exec jekyll serve
    ```
    - It turns out that the native windows command prompt [does not have a persistent history](https://serverfault.com/questions/95404/is-there-a-global-persistent-cmd-history), but [there is a version called clink](http://mridgers.github.io/clink/) that has been modified to make `cmd.exe` more useful. Thanks [Massimo](https://serverfault.com/users/6352/massimo) and [Robert Bak](https://serverfault.com/users/33646/robert-bak) for the tips.
- For Powershell, use `history`
  - If you closed the terminal before looking up the history, you can look at previous sessions by finding the history file. The powershell command to find out where it's stored is `(Get-PSReadlineOption).HistorySavePath` for me the result was `C:\Users\kgd\AppData\Roaming\Microsoft\Windows\PowerShell\PSReadLine\ConsoleHost_history.txt`. I found this helpful fact at [delftstack](https://www.delftstack.com/howto/powershell/see-the-command-history-across-all-powershell-sessions/#:~:text=Use%20the%20(Get%2DPSReadlineOption),History%20Across%20All%20PowerShell%20Sessions). I opened the file in [notepad++](https://notepad-plus-plus.org/), which I love.
- For Bash / Git Bash, use `history`

#### Modifying Default Paragraph spacing (and the list spacing)
The original `spacing-unit`, is defined in `./_sass/minima/initialize.scss` and is used to define the margins between paragraphs"
```scss
$spacing-unit:     30px !default; //default will not overwrite the variable if it has already been defined. If spacing-unit is undefined when this code runs, then it will be assigned the value 30px.
```
The block above is read before the `custom-variables.scss` code, and we can overwrite the `spacing-unit` by removing the `!default` keyword from <https://github.com/martyblaber/martyblaber.github.io/_sass/minima/custom-variables.scss>:
```scss
@charset "utf-8";

// Placeholder to allow overriding predefined variables smoothly.
$spacing-unit:     20px;
```

I also added some extra spacing info to the list format in <https://github.com/martyblaber/martyblaber.github.io/_sass/minima/custom-styles.scss>
```scss
// Placeholder to allow defining custom styles that override everything else.
// (Use `_sass/minima/custom-variables.scss` to override variable defaults)

// Override spacing of lists

li {
    > ul,
    > ol {
      margin-top: $spacing-unit/3;
      margin-bottom: 0;
    }
  }
```

### Change the default date format.
As a British Australian American, I dislike all date formats. I have no idea if 5/29 means it's May 29 or Nonicosuary 5 (Nonicos is the [IUPAC prefix](https://files.eric.ed.gov/fulltext/ED611724.pdf) for 29 of something. I had trouble deciding between -uary (like January) or -ember, -ober, etc. **Anyway, Nonicosuary is now the totally legit name for the 29th month.**)

So, I used the info [here](https://shopify.github.io/liquid/filters/date/) to update the date format in `_config.yaml` to be YYYY.MM.DD. Biggest to smallest. Files can now be sorted alphanumerically by date. Americans don't get confused by the day first thing and everyone else in the world can follow the biggest to smallest thing. Woop.
```yaml
# Minima date format
# refer to https://shopify.github.io/liquid/filters/date/ if you want to customize this
minima:
  date_format: "%Y.%m.%d"
```

## Add Collapsible Segments
I spent hours trying to get this to work because there are so many reasons that it might not work, and github gists have contaminated the answer space. I got it working by looking at [this stackoverflow answer](https://stackoverflow.com/questions/22291211/jekyll-how-to-get-markdown-parsing-inside-blocks-using-kramdown) by [Nicolas Hoizey](https://stackoverflow.com/users/717195/nicolas-hoizey) finally let me solve the issue. He pointed to the [html blocks docs of Kramdown](https://kramdown.gettalong.org/syntax.html#html-blocks)

OK, what's the deal here. Here is a block of code from [Joyrexus - Collapsible Markdown](https://gist.github.com/joyrexus/16041f2426450e73f5df9391f7f7ae5f):

~~~md
## collapsible markdown?

<details><summary>CLICK ME</summary>
<p>

#### yes, even hidden code blocks!

```python
print("hello world!")
```

</p>
</details>
~~~

Rendering backticks
: To get the code to display as above in markdown, the backticks (\`\`\`) must be enclosed by 3 tildes (~~~) at the top and bottom. I got that from the PlantUML section of [gitlab docs](https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/sites/handbook/source/handbook/markdown-guide/index.html.md).

 
 : This is a definition block. I found it [in the Kramdown quickref](https://kramdown.gettalong.org/quickref.html), but had to modify the `custom-styles.scss` again to include the bolded heading and the indented definitions, which I found by snooping the source of the quickref guide and some extras from [here](https://stackoverflow.com/questions/31438275/spacing-between-lines-of-dtdd-tags):
    ```scss
    dt {
        font-weight: bold;
    }

    dd {
        display: block;
        margin-inline-start: 40px;
        margin-top: 10px;
    }
    ```

Back to the collapsible markdown.
: The code from Joyrexus, above, should render like this:
![What the collapsible markdown should look like](/assets/images/2022-06-03 06_22_23-collapsible markdown.png){: height="205px" width="auto" .imagebox}

: What I got was this:
![What the collapsible markdown looked like](/assets/images/2022-06-03 07_03_21-How to not start a blog. _ Things I wish I understood.png){: height="50px" width="auto" .imagebox}

Not the solution
: [Some solutions](https://www.endtoend.ai/tutorial/collapsible-code-blocks/) wanted to bracket the code with options that change the behavior of kramdown:
    ~~~md
    {::options parse_block_html="true" /}
    ```python
    print("hello world!")
    {::options parse_block_html="false" /}
    ```
    ~~~

The Solution to including code blocks and other markdown inside a collapsible section
: Wrap the code in `<div markdown="1"> ... </div>` like so:
    ~~~md
    <details><summary>Click to expand</summary>
    <div markdown="1">
    #### yes, even hidden code blocks!

    ```python
    print("hello world!")
    ```
    </div>
    </details>
    ~~~

* * *
**Here it is!!** A code block and a heading inside a collapsible thingy.
<details><summary>Click to expand</summary>
<div markdown="1">
#### yes, even hidden code blocks!

```python
print("hello world!")
```
</div>
</details>
* * *

## Greenshot and inserting images
To get the image above into the page, I used [greenshot](https://greenshot.org/). Which I set up to always save the image in the format yyyy-MM-dd HH_mm_ss and also copy to the clipboard. I then moved the image to `/assets/images/` and added the markdown `![What the collapsible markdown should look like](/assets/images/2022-06-03 06_22_23-collapsible markdown.png){: width="400px"}`. But that was ugly and I couldn't tell where the image began/ended.

After some (hours) of putzing about, I discovered that I could add a custom css gizmo for a shadow.
I found *polaroid images* on [w3schools](https://www.w3schools.com/css/css3_images.asp) and the asssociated code block:
~~~css
div.polaroid {
  width: 80%;
  background-color: white;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}

img {width: 100%}

div.container {
  text-align: center;
  padding: 10px 20px;
}
~~~

In the end I added the following to my `custom-styles.css` on a much simpler:
~~~scss
.imagebox {
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  }
~~~

which I can add as a tag, like this: 

~~~md
![What the collapsible markdown should look like](/assets/images/2022-06-03 06_22_23-collapsible markdown.png){: height="205px" width="auto" .imagebox}
~~~

And it looks like so:

![What the collapsible markdown should look like](/assets/images/2022-06-03 06_22_23-collapsible markdown.png){: height="205px" width="auto" .imagebox}

## MathML

OK, final step is to try and add MathML


[gj-about]:    https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/about-github-pages-and-jekyll
[gj-create]:   https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/creating-a-github-pages-site-with-jekyll
[jekyll-install]: https://jekyllrb.com/docs/installation/windows/
[ruby-downloads]: https://rubyinstaller.org/downloads/
[bundler]:        https://bundler.io/
[theme-github]:   https://docs.github.com/en/pages/setting-up-a-github-pages-site-with-jekyll/adding-a-theme-to-your-github-pages-site-using-jekyll
[jekyll-math]: https://medium.com/coffee-in-a-klein-bottle/creating-a-mathematics-blog-with-jekyll-78cdee0339f3